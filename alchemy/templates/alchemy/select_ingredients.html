{% extends 'base.html' %}

{% block title %}Select Ingredients{% endblock %}

{% block content %}
<h1>Ingredients for Selected Effects</h1>
<p>Below are the ingredients grouped by the effects you selected.</p>

<form method="post" action="{% url 'review_potion' %}">
    {% csrf_token %}
    {% for effect, ingredient_list in grouped_ingredients.items %}
        <h2>{{ effect.name }}</h2>
        {% if ingredient_list %}
            <ul>
                {% for item in ingredient_list %}
                    <li>
                        <input
                            type="checkbox"
                            name="ingredients"
                            value="{{ item.ingredient.id }}"
                            {% if item.disabled %}disabled{% endif %}
                        >
                        {{ item.ingredient.name }}
                        (Weight: {{ item.ingredient.weight }}, Value: {{ item.ingredient.value }})
                        {% if item.disabled %}
                            <em>(Already selected in another effect)</em>
                        {% endif %}
                    </li>
                {% endfor %}
            </ul>
        {% else %}
            <p><em>No ingredients available for this effect.</em></p>
        {% endif %}
    {% endfor %}
    <button type="submit" class="btn btn-primary">Next: Review Potion</button>
</form>
{% endblock %}
